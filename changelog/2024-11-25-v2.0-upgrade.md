# MindSelf Studio v2.0 升级日志

**日期**: 2024-11-25

## 新增功能

### 1. 量表扩展
- **新增量表**: 
  - SDS 抑郁自评量表 (20题)
  - SAS 焦虑自评量表 (20题)
  - Rosenberg 自尊量表 (10题)
  - WHO-5 幸福感指数 (5题)
  - PSQI 睡眠质量评估 (10题)
- **量表分类**: 抑郁、焦虑、压力、自我、睡眠、幸福感

### 2. 移动端优化
- 添加 viewport-fit=cover 支持刘海屏/圆角屏
- 添加 safe-area-inset 适配底部安全区域
- 禁用双击缩放，优化触摸体验
- 添加 PWA 支持，可添加到主屏幕
- Service Worker 实现离线访问

### 3. 分享卡片功能
- 5种渐变风格卡片主题
- 自动生成项目二维码
- 支持保存为图片
- 支持系统原生分享 (Web Share API)

### 4. 历史记录增强
- 底部抽屉式历史记录面板
- 显示测评统计：总次数、量表种类、连续天数
- 最多保存20条记录
- 支持清空历史

### 5. UI/UX 优化
- 全新的卡片式量表选择界面
- 分类筛选标签
- 进度点指示器
- 动画过渡效果
- 圆环进度可视化得分

## 技术更新

### 文件结构
```
MindSelfStudio/
├── index.html        # 主页面 (重构)
├── app.js            # 核心逻辑 (重构)
├── manifest.json     # PWA 配置 (新增)
├── sw.js             # Service Worker (新增)
├── icons/            # 图标目录 (新增)
│   └── icon.svg
├── data/             # 数据文件 (新增)
│   ├── scales.js
│   └── scoring.js
└── changelog/        # 更新日志 (新增)
```

### 依赖更新
- Tailwind CSS (CDN)
- QRCode.js (CDN) - 二维码生成
- html2canvas (CDN) - 卡片截图

## 待办事项
- [ ] 生成 PNG 格式图标 (192x192, 512x512)
- [ ] 部署到静态托管平台
- [ ] 添加更多量表
- [ ] 数据导出功能
- [ ] 多语言支持

## 破坏性变更
- localStorage 键名从 `mindself_studio_history` 改为 `mindself_history`
- 量表数据结构重构
